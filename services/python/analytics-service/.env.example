# ========================================
# APPLICATION SETTINGS
# ========================================
APP_NAME=openride-analytics-service
APP_ENV=development
LOG_LEVEL=INFO
DEBUG=true

# ========================================
# SERVER SETTINGS
# ========================================
HOST=0.0.0.0
PORT=8097

# ========================================
# DATABASE SETTINGS (PostgreSQL)
# ========================================
DATABASE_URL=postgresql+asyncpg://openride:openride123@localhost:5432/openride
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ========================================
# CLICKHOUSE SETTINGS
# ========================================
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=8123
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DATABASE=openride_analytics
CLICKHOUSE_SECURE=false

# ========================================
# KAFKA SETTINGS
# ========================================
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_CONSUMER_GROUP_ID=analytics-service-group
KAFKA_AUTO_OFFSET_RESET=earliest
KAFKA_ENABLE_AUTO_COMMIT=false
KAFKA_MAX_POLL_RECORDS=500
KAFKA_SESSION_TIMEOUT_MS=30000
KAFKA_REQUEST_TIMEOUT_MS=40000

# Kafka Topics
KAFKA_TOPIC_USER_EVENTS=openride.events.user
KAFKA_TOPIC_ROUTE_EVENTS=openride.events.route
KAFKA_TOPIC_BOOKING_EVENTS=openride.events.booking
KAFKA_TOPIC_PAYMENT_EVENTS=openride.events.payment
KAFKA_TOPIC_TRIP_EVENTS=openride.events.trip
KAFKA_TOPIC_LOCATION_EVENTS=openride.events.location
KAFKA_TOPIC_DLQ=openride.events.dlq

# ========================================
# REDIS SETTINGS
# ========================================
REDIS_URL=redis://localhost:6379/2
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true
REDIS_DECODE_RESPONSES=true

# Cache TTL (seconds)
CACHE_TTL_METRICS=300
CACHE_TTL_REPORTS=3600
CACHE_TTL_AGGREGATIONS=1800

# ========================================
# JWT SETTINGS
# ========================================
JWT_SECRET_KEY=your-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# ========================================
# CELERY SETTINGS (Scheduled Reports)
# ========================================
CELERY_BROKER_URL=redis://localhost:6379/3
CELERY_RESULT_BACKEND=redis://localhost:6379/3
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=Africa/Lagos
CELERY_ENABLE_UTC=true

# ========================================
# EMAIL SETTINGS (For Report Delivery)
# ========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@openride.com
SMTP_PASSWORD=your-smtp-password
SMTP_FROM_EMAIL=noreply@openride.com
SMTP_USE_TLS=true

# ========================================
# METRICS SETTINGS
# ========================================
METRICS_RETENTION_DAYS=90
AGGREGATION_BATCH_SIZE=1000
ENABLE_PROMETHEUS_METRICS=true
PROMETHEUS_PORT=9097

# ========================================
# CORS SETTINGS
# ========================================
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# ========================================
# RATE LIMITING
# ========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# ========================================
# DATA EXPORT SETTINGS
# ========================================
EXPORT_MAX_ROWS=100000
EXPORT_TEMP_DIR=/tmp/openride-exports
EXPORT_RETENTION_HOURS=24

# ========================================
# MONITORING & OBSERVABILITY
# ========================================
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD_MS=1000
